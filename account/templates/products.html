<section class="py-5 bg-light">
    <div class="container px-4 px-lg-5">

        <!-- Heading -->
        <h2 class="text-center mt-2 mb-5">
            Welcome to Your Fresh Grocery Store! ðŸ›’
        </h2>

        <!-- Product Grid -->
        <div class="row gx-4 gx-lg-5 row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 justify-content-center">

            {% for i in pl %}
            <div class="col mb-5">
                <div class="card h-100 shadow-sm border-0 rounded-4">
                    
                    <!-- Product Image -->
                    <div class="position-relative overflow-hidden rounded-top-4">
                        <a href="{% url 'account:detail' i.id %}">
                            <img class="card-img-top img-fluid" src="{{ i.pimg.url }}" alt="{{ i.name }}" style="height: 220px; object-fit: cover;">
                        </a>
                        <!-- Price Badge -->
                        <span class="position-absolute top-0 start-0 bg-success text-white px-3 py-1 rounded-bottom-end fw-bold">
                            â‚¹{{ i.price }}
                        </span>
                    </div>

                    <!-- Product Details -->
                    <div class="card-body p-3 text-center">
                        <h5 class="card-title fw-bold">{{ i.name }}</h5>
                        <div class="d-flex justify-content-center mb-2">
                            {% for star in "12345" %}
                                <span class="text-warning me-1">â˜…</span>
                            {% endfor %}
                        </div>
                        <p class="card-text text-truncate">{{ i.description|truncatechars:60 }}</p>
                    </div>

                    <!-- Add to Cart Button -->
                    <div class="card-footer bg-transparent border-top-0 text-center pb-4">
                        {% if user.is_authenticated %}
                            <!-- User logged in â†’ Add to cart -->
                            <a href="{% url 'cart:add' i.id %}" 
                            class="btn btn-outline-primary btn-sm px-4 py-2 fw-bold rounded-pill">
                                Add to Cart ðŸ›’
                            </a>
                        {% else %}

                            <!-- User not logged in â†’ Redirect to login page -->
                            <a href="{% url 'account:login' %}?next={% url 'cart:add' i.id %}"
                            class="btn btn-outline-primary btn-sm px-4 py-2 fw-bold rounded-pill">
                                Add to Cart ðŸ›’
                            </a>
                        {% endif %}

                    </div>

                </div>
            </div>
            {% endfor %}

        </div>

        <!-- Pagination -->
        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center mt-4">
                {% if pl.has_previous %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ pl.previous_page_number }}" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                {% else %}
                    <li class="page-item disabled"><span class="page-link">&laquo;</span></li>
                {% endif %}

                {% for num in pl.paginator.page_range %}
                    {% if pl.number == num %}
                        <li class="page-item active"><span class="page-link">{{ num }}</span></li>
                    {% elif num > pl.number|add:-3 and num < pl.number|add:3 %}
                        <li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
                    {% endif %}
                {% endfor %}

                {% if pl.has_next %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ pl.next_page_number }}" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                {% else %}
                    <li class="page-item disabled"><span class="page-link">&raquo;</span></li>
                {% endif %}
            </ul>
        </nav>

    </div>
</section>

<!-- Styles -->
<style>
.card:hover {
    transform: translateY(-5px);
    transition: transform 0.3s ease;
}
.card-img-top {
    transition: transform 0.3s ease;
}
.card-img-top:hover {
    transform: scale(1.05);
}

/* Main Card Style */
.card {
    border-radius: 20px !important;
    overflow: hidden;
    background: #ffffff;
    border: none !important;
    transition: all 0.35s ease-in-out;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.card:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: 0 12px 26px rgba(0, 0, 0, 0.17);
}

/* Image Effects */
.card-img-top {
    height: 220px;
    object-fit: cover;
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
    transition: 0.4s ease-in-out;
}

/* Subtle Zoom on Hover */
.card:hover .card-img-top {
    transform: scale(1.08);
}

/* Shine Overlay Effect */
.card-img-top:hover {
    position: relative;
}

.card-img-top:hover::after {
    content: "";
    position: absolute;
    top: 0; left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,0.4) 50%, transparent 100%);
    animation: shine 0.8s forwards;
}

/* Shine Animation */
@keyframes shine {
    100% { left: 100%; }
}

/* Price Badge Styling */
.price-badge {
    background: linear-gradient(135deg, #28a745, #32d873);
    padding: 6px 14px;
    font-weight: bold;
    border-bottom-right-radius: 15px;
    border-top-left-radius: 5px;
    font-size: 14px;
}

/* Product Title */
.card-title {
    font-size: 1.1rem;
    color: #2e2e2e;
}

/* Stars */
.text-warning {
    color: #ffc107 !important;
    font-size: 17px;
}

/* Add to Cart Button */
.btn-custom-cart {
    border-radius: 50px;
    padding: 10px 22px;
    border: 2px solid #0d6efd;
    transition: all 0.3s ease;
}

.btn-custom-cart:hover {
    background: #0d6efd;
    color: white;
    box-shadow: 0 5px 12px rgba(13, 110, 253, 0.4);
    transform: translateY(-2px);
}

/* Pagination */
.pagination .page-link {
    padding: 10px 15px;
    border-radius: 8px;
    margin: 0px 4px;
}

.pagination .page-item.active .page-link {
    background-color: #0d6efd;
    border-color: #0d6efd;
    box-shadow: 0 0 10px rgba(13, 110, 253, 0.4);
}

</style>
