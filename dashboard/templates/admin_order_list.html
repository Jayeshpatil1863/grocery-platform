{% extends 'admin_home.html' %}

{% block body %}
<div class="container mt-5">

    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="fw-bold orders-title mb-1">ðŸ“¦ All Orders</h2>
            <p class="text-muted small mb-0">Track, manage and update all customer orders easily.</p>
        </div>
    </div>

    <!-- Premium Table Wrapper -->
    <div class="table-responsive orders-table-wrapper">

        <table class="table align-middle orders-table mb-0">
            <thead>
                <tr>
                    <th>Order ID</th>
                    <th>User</th>
                    <th>Product</th>
                    <th>Qty</th>
                    <th>Total</th>
                    <th>Status</th>
                    <th>Delivery Slot</th>
                    <th>Date</th>
                    <th class="text-center">Action</th>
                </tr>
            </thead>

            <tbody>
                {% for order in orders %}
                <tr>
                    <td class="fw-semibold">#{{ order.id }}</td>

                    <td class="fw-semibold">
                        {{ order.user.username }}
                    </td>

                    <td>
                        {{ order.product_name }}
                    </td>

                    <td>
                        <span class="qty-badge">{{ order.quantity }}</span>
                    </td>

                    <td class="price-text">
                        â‚¹{{ order.total_price|floatformat:2 }}
                    </td>

                    <td>
                        <span class="status-badge 
                            {% if order.status == 'Delivered' %} status-success
                            {% elif order.status == 'Pending' %} status-warning
                            {% elif order.status == 'Cancelled' %} status-danger
                            {% else %} status-info
                            {% endif %}">
                            {{ order.status }}
                        </span>
                    </td>

                    <td>
                        <span class="slot-badge">{{ order.delivery_slot }}</span>
                    </td>

                    <td class="text-muted small">
                        <i class="bi bi-clock me-1"></i>
                        {{ order.created_at|date:"d M Y, H:i" }}
                    </td>

                    <td class="text-center">
                        <a href="{% url 'dashboard:admin_order_edit' order.id %}" 
                           class="btn btn-icon btn-icon-primary"
                           title="Edit">
                            <i class="bi bi-pencil-square"></i>
                        </a>

                        <a href="{% url 'dashboard:admin_order_delete' order.id %}" 
                           class="btn btn-icon btn-icon-danger"
                           onclick="return confirm('Are you sure you want to delete this order?');"
                           title="Delete">
                            <i class="bi bi-trash"></i>
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="9" class="text-center text-muted py-4">
                        No orders found.
                    </td>
                </tr>
                {% endfor %}
            </tbody>

        </table>

    </div>
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

<style>
    /* Title */
.orders-title {
    background: linear-gradient(90deg, #0d6efd, #22c55e);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

/* Table Wrapper */
.orders-table-wrapper {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(12px);
    border-radius: 18px;
    box-shadow: 0 18px 40px rgba(15, 23, 42, 0.18);
    overflow: hidden;
}

/* Table Head */
.orders-table thead {
    background: linear-gradient(135deg, #0f172a, #111827);
    color: #ffffff;
}
.orders-table th {
    font-size: 0.85rem;
    letter-spacing: 0.05em;
    text-transform: uppercase;
}

/* Row hover */
.orders-table tbody tr {
    transition: 0.25s ease;
}
.orders-table tbody tr:hover {
    background: rgba(59, 130, 246, 0.06);
    transform: scale(1.005);
}

/* Quantity badge */
.qty-badge {
    background: linear-gradient(135deg, #6366f1, #0d6efd);
    color: white;
    padding: 5px 12px;
    border-radius: 999px;
    font-size: 0.8rem;
    font-weight: 600;
}

/* Price */
.price-text {
    font-weight: 700;
    color: #16a34a;
}

/* Status Badges */
.status-badge {
    padding: 6px 14px;
    border-radius: 999px;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
}
.status-success {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    color: white;
}
.status-warning {
    background: linear-gradient(135deg, #facc15, #eab308);
    color: #111827;
}
.status-danger {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    color: white;
}
.status-info {
    background: linear-gradient(135deg, #38bdf8, #0ea5e9);
    color: white;
}

/* Slot Badge */
.slot-badge {
    background: rgba(15, 23, 42, 0.08);
    padding: 6px 12px;
    border-radius: 999px;
    font-size: 0.75rem;
    font-weight: 600;
}

/* Icon Buttons */
.btn-icon {
    width: 34px;
    height: 34px;
    border-radius: 999px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    border: none;
    font-size: 0.9rem;
    transition: 0.2s ease;
}
.btn-icon-primary {
    background: rgba(37, 99, 235, 0.12);
    color: #1d4ed8;
}
.btn-icon-primary:hover {
    background: rgba(37, 99, 235, 0.2);
}
.btn-icon-danger {
    background: rgba(239, 68, 68, 0.12);
    color: #b91c1c;
}
.btn-icon-danger:hover {
    background: rgba(239, 68, 68, 0.2);
}

</style>
{% endblock %}
